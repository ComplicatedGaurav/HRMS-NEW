{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\Human-Resource-management-master\\\\client\\\\src\\\\components\\\\layouts\\\\Admin\\\\Options.jsx\";\nimport axios from \"axios\";\nimport React, { Component } from \"react\";\nimport AdminSidePanel from \"./AdminSidePanel\";\nimport toast from \"toasted-notes\";\nimport \"toasted-notes/src/styles.css\";\nimport { Consumer } from \"../../../context\";\nimport { Redirect } from \"react-router-dom\";\nimport { Spring } from \"react-spring/renderprops\";\nexport default class Options extends Component {\n  constructor() {\n    super();\n\n    this.componentDidMount = async () => {\n      try {\n        var _teamList$data$, _teamList$data$2;\n\n        const teamList = await axios.get(\"/api/admin/getTeamsAndRoles\");\n        console.log(\"API Response:\", teamList.data); // Log the response\n\n        this.setState({\n          existingTeamList: ((_teamList$data$ = teamList.data[0]) === null || _teamList$data$ === void 0 ? void 0 : _teamList$data$.teamNames) || [],\n          existingRoleList: ((_teamList$data$2 = teamList.data[0]) === null || _teamList$data$2 === void 0 ? void 0 : _teamList$data$2.roleNames) || []\n        });\n      } catch (error) {\n        console.error(\"Error fetching team and role data:\", error);\n        this.setState({\n          error: \"Failed to fetch data.\"\n        });\n      }\n    };\n\n    this.onChange = e => this.setState({\n      [e.target.name]: e.target.value,\n      error: \"\"\n    });\n\n    this.onAddTeam = async () => {\n      // check if team name already exists\n      const {\n        existingTeamList\n      } = this.state;\n      const {\n        teamName\n      } = this.state;\n\n      if (teamName.trim().length === 0) {\n        this.setState({\n          error: \"Team name cannot be empty\"\n        });\n      } else if (existingTeamList.includes(teamName.trim())) {\n        this.setState({\n          error: \"Team name already exists\"\n        });\n      } else {\n        // save the new team\n        const newTeam = await axios.post(\"/api/admin/addNewTeam\", {\n          teamName: this.state.teamName\n        });\n        this.setState({\n          existingTeamList: newTeam.data.teamNames\n        });\n        toast.notify(\"New team added successfully\", {\n          position: \"top-right\"\n        });\n        console.log(\"added new team: \", newTeam.data);\n      }\n    };\n\n    this.onAddRole = async () => {\n      // check if team name already exists\n      const {\n        existingRoleList\n      } = this.state;\n      const {\n        roleName\n      } = this.state;\n\n      if (roleName.trim().length === 0) {\n        this.setState({\n          error: \"Role name cannot be empty\"\n        });\n      } else if (existingRoleList.includes(roleName.trim())) {\n        this.setState({\n          error: \"Role name already exists\"\n        });\n      } else {\n        // save the new Role\n        const newRole = await axios.post(\"/api/admin/addNewRole\", {\n          roleName: this.state.roleName\n        });\n        toast.notify(\"New role added successfully\", {\n          position: \"top-right\"\n        });\n        this.setState({\n          existingRoleList: newRole.data.roleNames\n        });\n        console.log(\"added new role: \", newRole.data);\n      }\n    };\n\n    this.onDeleteAdminAccount = async dispatch => {\n      const adminId = localStorage.getItem(\"userId\");\n\n      try {\n        await axios.delete(`/api/admin/deleteAdminAcc/${adminId}`);\n        console.log(\"deleted admin acc\");\n        localStorage.setItem(\"auth-token\", \"\");\n        localStorage.setItem(\"userId\", \"\");\n        dispatch({\n          type: \"LOGGED_OUT\"\n        });\n        this.props.history.push(\"/login\");\n      } catch (err) {\n        console.log(err.response.data);\n      }\n    };\n\n    this.addToGoogleCalender = e => {\n      e.preventDefault();\n\n      try {\n        var gapi = window.gapi;\n        console.log(gapi);\n        var CLIENT_ID = \"487679379915-7rvf2ror46e4bbsj8t8obali4heq5qjm.apps.googleusercontent.com\";\n        var API_KEY = \"AIzaSyB_HYziuQ7j6s9CiqSgXV3YiGTzr5nc0xE\";\n        var DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"];\n        var SCOPES = \"https://www.googleapis.com/auth/calendar.events\";\n        gapi.load(\"client:auth2\", () => {\n          console.log(\"loaded client\");\n          gapi.client.init({\n            apiKey: API_KEY,\n            clientId: CLIENT_ID,\n            discoveryDocs: DISCOVERY_DOCS,\n            scope: SCOPES\n          });\n          gapi.client.load(\"calendar\", \"v3\", () => console.log(\"loaded calender\"));\n          gapi.auth2.getAuthInstance().signIn().then(() => {\n            var event = {\n              summary: this.state.title,\n              description: this.state.description,\n              start: {\n                dateTime: `${this.state.dueDate}T${this.state.time}:00`,\n                timeZone: \"Asia/Kolkata\"\n              },\n              end: {\n                dateTime: `${this.state.dueDate}T${this.state.time}:00`,\n                timeZone: \"Asia/Kolkata\"\n              },\n              reminders: {\n                useDefault: false,\n                overrides: [{\n                  method: \"email\",\n                  minutes: 24 * 60\n                }, {\n                  method: \"popup\",\n                  minutes: 10\n                }]\n              }\n            };\n            var request = gapi.client.calendar.events.insert({\n              calendarId: \"primary\",\n              resource: event\n            });\n            console.log(\"add new event from addTodo\");\n            request.execute(event => {\n              console.log(event);\n            });\n            toast.notify(\"Successfully set reminder to your Google Calender\", {\n              position: \"top-right\"\n            });\n          });\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.state = {\n      teamName: \"\",\n      roleName: \"\",\n      existingTeamList: [],\n      existingRoleList: [],\n      error: \"\",\n      // google calender\n      title: \"\",\n      description: \"\",\n      dueDate: \"\",\n      time: \"\"\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Consumer, {\n      children: value => {\n        let {\n          dispatch,\n          user\n        } = value;\n        const token = localStorage.getItem(\"auth-token\");\n        if (!token) return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 30\n        }, this);\n        if (user && user.role !== \"admin\") return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/empDashBoard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 20\n        }, this);\n        return /*#__PURE__*/_jsxDEV(Spring, {\n          from: {\n            opacity: 0\n          },\n          to: {\n            opacity: 1\n          },\n          config: {\n            duration: 300\n          },\n          children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row m-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2 p-0 leftPart\",\n              children: /*#__PURE__*/_jsxDEV(AdminSidePanel, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col rightPart container\",\n              style: props,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col\",\n                      children: /*#__PURE__*/_jsxDEV(\"form\", {\n                        className: \"addEmpForm\",\n                        children: [this.state.error ? /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"alert alert-danger\",\n                          children: this.state.error\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 234,\n                          columnNumber: 33\n                        }, this) : null, /*#__PURE__*/_jsxDEV(\"h3\", {\n                          children: \"Add new Teams and Roles\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 239,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 240,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                          htmlFor: \"team\",\n                          children: \"New Team\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 243,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"input-group mb-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text\",\n                            className: \"form-control\",\n                            value: this.state.teamName,\n                            name: \"teamName\",\n                            \"aria-label\": \"Recipient's username\",\n                            \"aria-describedby\": \"button-addon2\",\n                            onChange: this.onChange\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 245,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"input-group-append\",\n                            children: /*#__PURE__*/_jsxDEV(\"button\", {\n                              className: \"btn btn-primary\",\n                              type: \"button\",\n                              id: \"button-addon2\",\n                              onClick: this.onAddTeam,\n                              children: \"Add\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 256,\n                              columnNumber: 35\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 255,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 244,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                          htmlFor: \"team\",\n                          children: \"New Role\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 268,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"input-group mb-3\",\n                          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"text\",\n                            className: \"form-control\",\n                            value: this.state.roleName,\n                            name: \"roleName\",\n                            \"aria-label\": \"Recipient's username\",\n                            \"aria-describedby\": \"button-addon2\",\n                            onChange: this.onChange\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 270,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"input-group-append\",\n                            children: /*#__PURE__*/_jsxDEV(\"button\", {\n                              className: \"btn btn-primary\",\n                              type: \"button\",\n                              id: \"button-addon2\",\n                              onClick: this.onAddRole,\n                              children: \"Add\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 281,\n                              columnNumber: 35\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 280,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 269,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 232,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 231,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row mt-5 ml-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col\",\n                      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"button\",\n                        className: \"btn btn-danger\",\n                        value: \"Delete Admin Account\",\n                        onClick: () => this.onDeleteAdminAccount(dispatch)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 297,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"alert alert-danger mt-3\",\n                        children: /*#__PURE__*/_jsxDEV(\"small\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                            children: \"Note: \"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 308,\n                            columnNumber: 33\n                          }, this), \" By deleting admin account, you will loose all your current pending requests, which might lead to adverse effects. Therefore it is recommended you delete the account once clearing all the requests\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 307,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 306,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: /*#__PURE__*/_jsxDEV(\"form\", {\n                    onSubmit: this.addToGoogleCalender.bind(this),\n                    className: \"addEmpForm\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      children: [\"Add Reminder\", \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fab fa-google text-dark\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 327,\n                        columnNumber: 29\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 325,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"form-group\",\n                          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                            htmlFor: \"title\",\n                            children: \"Title\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 334,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                            required: true,\n                            type: \"text\",\n                            className: \"form-control\",\n                            id: \"title\",\n                            name: \"title\",\n                            onChange: this.onChange\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 335,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 333,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 332,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 331,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"form-group\",\n                          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                            htmlFor: \"description\",\n                            children: \"Description\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 350,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                            required: true,\n                            type: \"text\",\n                            className: \"form-control\",\n                            id: \"description\",\n                            name: \"description\",\n                            onChange: this.onChange\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 351,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 349,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 348,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 347,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"form-group\",\n                          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                            htmlFor: \"dueDate\",\n                            children: \"Due Date\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 366,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                            required: true,\n                            type: \"date\",\n                            className: \"form-control\",\n                            id: \"dueDate\",\n                            name: \"dueDate\",\n                            onChange: this.onChange\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 367,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 365,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 364,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"form-group\",\n                          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                            htmlFor: \"time\",\n                            children: \"Time\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 380,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                            required: true,\n                            type: \"time\",\n                            className: \"form-control\",\n                            id: \"time\",\n                            name: \"time\",\n                            onChange: this.onChange\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 381,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 379,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 378,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"form-group\",\n                          children: /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"submit\",\n                            value: \"Submit\",\n                            className: \"btn btn-primary btn-block \"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 396,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 395,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 394,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 393,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["F:/Human-Resource-management-master/client/src/components/layouts/Admin/Options.jsx"],"names":["axios","React","Component","AdminSidePanel","toast","Consumer","Redirect","Spring","Options","constructor","componentDidMount","teamList","get","console","log","data","setState","existingTeamList","teamNames","existingRoleList","roleNames","error","onChange","e","target","name","value","onAddTeam","state","teamName","trim","length","includes","newTeam","post","notify","position","onAddRole","roleName","newRole","onDeleteAdminAccount","dispatch","adminId","localStorage","getItem","delete","setItem","type","props","history","push","err","response","addToGoogleCalender","preventDefault","gapi","window","CLIENT_ID","API_KEY","DISCOVERY_DOCS","SCOPES","load","client","init","apiKey","clientId","discoveryDocs","scope","auth2","getAuthInstance","signIn","then","event","summary","title","description","start","dateTime","dueDate","time","timeZone","end","reminders","useDefault","overrides","method","minutes","request","calendar","events","insert","calendarId","resource","execute","render","user","token","role","opacity","duration","bind"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAO,8BAAP;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,SAASC,MAAT,QAAuB,0BAAvB;AAEA,eAAe,MAAMC,OAAN,SAAsBN,SAAtB,CAAgC;AAC7CO,EAAAA,WAAW,GAAG;AACZ;;AADY,SAoBdC,iBApBc,GAoBM,YAAY;AAC9B,UAAI;AAAA;;AACF,cAAMC,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAU,6BAAV,CAAvB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BH,QAAQ,CAACI,IAAtC,EAFE,CAE2C;;AAE7C,aAAKC,QAAL,CAAc;AACZC,UAAAA,gBAAgB,EAAE,oBAAAN,QAAQ,CAACI,IAAT,CAAc,CAAd,qEAAkBG,SAAlB,KAA+B,EADrC;AAEZC,UAAAA,gBAAgB,EAAE,qBAAAR,QAAQ,CAACI,IAAT,CAAc,CAAd,uEAAkBK,SAAlB,KAA+B;AAFrC,SAAd;AAID,OARD,CAQE,OAAOC,KAAP,EAAc;AACdR,QAAAA,OAAO,CAACQ,KAAR,CAAc,oCAAd,EAAoDA,KAApD;AACA,aAAKL,QAAL,CAAc;AAAEK,UAAAA,KAAK,EAAE;AAAT,SAAd;AACD;AACF,KAjCa;;AAAA,SAmCdC,QAnCc,GAmCFC,CAAD,IACT,KAAKP,QAAL,CAAc;AAAE,OAACO,CAAC,CAACC,MAAF,CAASC,IAAV,GAAiBF,CAAC,CAACC,MAAF,CAASE,KAA5B;AAAmCL,MAAAA,KAAK,EAAE;AAA1C,KAAd,CApCY;;AAAA,SAsCdM,SAtCc,GAsCF,YAAY;AACtB;AACA,YAAM;AAAEV,QAAAA;AAAF,UAAuB,KAAKW,KAAlC;AACA,YAAM;AAAEC,QAAAA;AAAF,UAAe,KAAKD,KAA1B;;AAEA,UAAIC,QAAQ,CAACC,IAAT,GAAgBC,MAAhB,KAA2B,CAA/B,EAAkC;AAChC,aAAKf,QAAL,CAAc;AACZK,UAAAA,KAAK,EAAE;AADK,SAAd;AAGD,OAJD,MAIO,IAAIJ,gBAAgB,CAACe,QAAjB,CAA0BH,QAAQ,CAACC,IAAT,EAA1B,CAAJ,EAAgD;AACrD,aAAKd,QAAL,CAAc;AACZK,UAAAA,KAAK,EAAE;AADK,SAAd;AAGD,OAJM,MAIA;AACL;AACA,cAAMY,OAAO,GAAG,MAAMjC,KAAK,CAACkC,IAAN,CAAW,uBAAX,EAAoC;AACxDL,UAAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWC;AADmC,SAApC,CAAtB;AAIA,aAAKb,QAAL,CAAc;AAAEC,UAAAA,gBAAgB,EAAEgB,OAAO,CAAClB,IAAR,CAAaG;AAAjC,SAAd;AAEAd,QAAAA,KAAK,CAAC+B,MAAN,CAAa,6BAAb,EAA4C;AAC1CC,UAAAA,QAAQ,EAAE;AADgC,SAA5C;AAIAvB,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCmB,OAAO,CAAClB,IAAxC;AACD;AACF,KAjEa;;AAAA,SAmEdsB,SAnEc,GAmEF,YAAY;AACtB;AACA,YAAM;AAAElB,QAAAA;AAAF,UAAuB,KAAKS,KAAlC;AACA,YAAM;AAAEU,QAAAA;AAAF,UAAe,KAAKV,KAA1B;;AAEA,UAAIU,QAAQ,CAACR,IAAT,GAAgBC,MAAhB,KAA2B,CAA/B,EAAkC;AAChC,aAAKf,QAAL,CAAc;AACZK,UAAAA,KAAK,EAAE;AADK,SAAd;AAGD,OAJD,MAIO,IAAIF,gBAAgB,CAACa,QAAjB,CAA0BM,QAAQ,CAACR,IAAT,EAA1B,CAAJ,EAAgD;AACrD,aAAKd,QAAL,CAAc;AACZK,UAAAA,KAAK,EAAE;AADK,SAAd;AAGD,OAJM,MAIA;AACL;AACA,cAAMkB,OAAO,GAAG,MAAMvC,KAAK,CAACkC,IAAN,CAAW,uBAAX,EAAoC;AACxDI,UAAAA,QAAQ,EAAE,KAAKV,KAAL,CAAWU;AADmC,SAApC,CAAtB;AAIAlC,QAAAA,KAAK,CAAC+B,MAAN,CAAa,6BAAb,EAA4C;AAC1CC,UAAAA,QAAQ,EAAE;AADgC,SAA5C;AAIA,aAAKpB,QAAL,CAAc;AAAEG,UAAAA,gBAAgB,EAAEoB,OAAO,CAACxB,IAAR,CAAaK;AAAjC,SAAd;AAEAP,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCyB,OAAO,CAACxB,IAAxC;AACD;AACF,KA9Fa;;AAAA,SAgGdyB,oBAhGc,GAgGS,MAAOC,QAAP,IAAoB;AACzC,YAAMC,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAhB;;AAEA,UAAI;AACF,cAAM5C,KAAK,CAAC6C,MAAN,CAAc,6BAA4BH,OAAQ,EAAlD,CAAN;AACA7B,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA6B,QAAAA,YAAY,CAACG,OAAb,CAAqB,YAArB,EAAmC,EAAnC;AACAH,QAAAA,YAAY,CAACG,OAAb,CAAqB,QAArB,EAA+B,EAA/B;AAEAL,QAAAA,QAAQ,CAAC;AACPM,UAAAA,IAAI,EAAE;AADC,SAAD,CAAR;AAIA,aAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACD,OAXD,CAWE,OAAOC,GAAP,EAAY;AACZtC,QAAAA,OAAO,CAACC,GAAR,CAAYqC,GAAG,CAACC,QAAJ,CAAarC,IAAzB;AACD;AACF,KAjHa;;AAAA,SAmHdsC,mBAnHc,GAmHS9B,CAAD,IAAO;AAC3BA,MAAAA,CAAC,CAAC+B,cAAF;;AAEA,UAAI;AACF,YAAIC,IAAI,GAAGC,MAAM,CAACD,IAAlB;AACA1C,QAAAA,OAAO,CAACC,GAAR,CAAYyC,IAAZ;AACA,YAAIE,SAAS,GACX,0EADF;AAEA,YAAIC,OAAO,GAAG,yCAAd;AACA,YAAIC,cAAc,GAAG,CACnB,+DADmB,CAArB;AAGA,YAAIC,MAAM,GAAG,iDAAb;AAEAL,QAAAA,IAAI,CAACM,IAAL,CAAU,cAAV,EAA0B,MAAM;AAC9BhD,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AAEAyC,UAAAA,IAAI,CAACO,MAAL,CAAYC,IAAZ,CAAiB;AACfC,YAAAA,MAAM,EAAEN,OADO;AAEfO,YAAAA,QAAQ,EAAER,SAFK;AAGfS,YAAAA,aAAa,EAAEP,cAHA;AAIfQ,YAAAA,KAAK,EAAEP;AAJQ,WAAjB;AAOAL,UAAAA,IAAI,CAACO,MAAL,CAAYD,IAAZ,CAAiB,UAAjB,EAA6B,IAA7B,EAAmC,MACjChD,OAAO,CAACC,GAAR,CAAY,iBAAZ,CADF;AAIAyC,UAAAA,IAAI,CAACa,KAAL,CACGC,eADH,GAEGC,MAFH,GAGGC,IAHH,CAGQ,MAAM;AACV,gBAAIC,KAAK,GAAG;AACVC,cAAAA,OAAO,EAAE,KAAK7C,KAAL,CAAW8C,KADV;AAEVC,cAAAA,WAAW,EAAE,KAAK/C,KAAL,CAAW+C,WAFd;AAGVC,cAAAA,KAAK,EAAE;AACLC,gBAAAA,QAAQ,EAAG,GAAE,KAAKjD,KAAL,CAAWkD,OAAQ,IAAG,KAAKlD,KAAL,CAAWmD,IAAK,KAD9C;AAELC,gBAAAA,QAAQ,EAAE;AAFL,eAHG;AAOVC,cAAAA,GAAG,EAAE;AACHJ,gBAAAA,QAAQ,EAAG,GAAE,KAAKjD,KAAL,CAAWkD,OAAQ,IAAG,KAAKlD,KAAL,CAAWmD,IAAK,KADhD;AAEHC,gBAAAA,QAAQ,EAAE;AAFP,eAPK;AAWVE,cAAAA,SAAS,EAAE;AACTC,gBAAAA,UAAU,EAAE,KADH;AAETC,gBAAAA,SAAS,EAAE,CACT;AAAEC,kBAAAA,MAAM,EAAE,OAAV;AAAmBC,kBAAAA,OAAO,EAAE,KAAK;AAAjC,iBADS,EAET;AAAED,kBAAAA,MAAM,EAAE,OAAV;AAAmBC,kBAAAA,OAAO,EAAE;AAA5B,iBAFS;AAFF;AAXD,aAAZ;AAoBA,gBAAIC,OAAO,GAAGhC,IAAI,CAACO,MAAL,CAAY0B,QAAZ,CAAqBC,MAArB,CAA4BC,MAA5B,CAAmC;AAC/CC,cAAAA,UAAU,EAAE,SADmC;AAE/CC,cAAAA,QAAQ,EAAEpB;AAFqC,aAAnC,CAAd;AAKA3D,YAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AAEAyE,YAAAA,OAAO,CAACM,OAAR,CAAiBrB,KAAD,IAAW;AACzB3D,cAAAA,OAAO,CAACC,GAAR,CAAY0D,KAAZ;AACD,aAFD;AAIApE,YAAAA,KAAK,CAAC+B,MAAN,CAAa,mDAAb,EAAkE;AAChEC,cAAAA,QAAQ,EAAE;AADsD,aAAlE;AAGD,WAtCH;AAuCD,SArDD;AAsDD,OAjED,CAiEE,OAAOb,CAAP,EAAU;AACVV,QAAAA,OAAO,CAACC,GAAR,CAAYS,CAAZ;AACD;AACF,KA1La;;AAGZ,SAAKK,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,EADC;AAEXS,MAAAA,QAAQ,EAAE,EAFC;AAIXrB,MAAAA,gBAAgB,EAAE,EAJP;AAKXE,MAAAA,gBAAgB,EAAE,EALP;AAOXE,MAAAA,KAAK,EAAE,EAPI;AASX;AACAqD,MAAAA,KAAK,EAAE,EAVI;AAWXC,MAAAA,WAAW,EAAE,EAXF;AAYXG,MAAAA,OAAO,EAAE,EAZE;AAaXC,MAAAA,IAAI,EAAE;AAbK,KAAb;AAeD;;AA0KDe,EAAAA,MAAM,GAAG;AACP,wBACE,QAAC,QAAD;AAAA,gBACIpE,KAAD,IAAW;AACV,YAAI;AAAEe,UAAAA,QAAF;AAAYsD,UAAAA;AAAZ,YAAqBrE,KAAzB;AAEA,cAAMsE,KAAK,GAAGrD,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAd;AAEA,YAAI,CAACoD,KAAL,EAAY,oBAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAP;AACZ,YAAID,IAAI,IAAIA,IAAI,CAACE,IAAL,KAAc,OAA1B,EACE,oBAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAP;AAEF,4BACE,QAAC,MAAD;AACE,UAAA,IAAI,EAAE;AAAEC,YAAAA,OAAO,EAAE;AAAX,WADR;AAEE,UAAA,EAAE,EAAE;AAAEA,YAAAA,OAAO,EAAE;AAAX,WAFN;AAGE,UAAA,MAAM,EAAE;AAAEC,YAAAA,QAAQ,EAAE;AAAZ,WAHV;AAAA,oBAKInD,KAAD,iBACC;AAAK,YAAA,SAAS,EAAC,SAAf;AAAA,oCAEE;AAAK,cAAA,SAAS,EAAC,oBAAf;AAAA,qCACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAFF,eAQE;AAAK,cAAA,SAAS,EAAC,yBAAf;AAAyC,cAAA,KAAK,EAAEA,KAAhD;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,KAAf;AAAA,wCAEE;AAAK,kBAAA,SAAS,EAAC,KAAf;AAAA,0CACE;AAAK,oBAAA,SAAS,EAAC,KAAf;AAAA,2CACE;AAAK,sBAAA,SAAS,EAAC,KAAf;AAAA,6CACE;AAAM,wBAAA,SAAS,EAAC,YAAhB;AAAA,mCACG,KAAKpB,KAAL,CAAWP,KAAX,gBACC;AAAK,0BAAA,SAAS,EAAC,oBAAf;AAAA,oCACG,KAAKO,KAAL,CAAWP;AADd;AAAA;AAAA;AAAA;AAAA,gCADD,GAIG,IALN,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAPF,eAQE;AAAA;AAAA;AAAA;AAAA,gCARF,eAWE;AAAO,0BAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAXF,eAYE;AAAK,0BAAA,SAAS,EAAC,kBAAf;AAAA,kDACE;AACE,4BAAA,IAAI,EAAC,MADP;AAEE,4BAAA,SAAS,EAAC,cAFZ;AAGE,4BAAA,KAAK,EAAE,KAAKO,KAAL,CAAWC,QAHpB;AAIE,4BAAA,IAAI,EAAC,UAJP;AAKE,0CAAW,sBALb;AAME,gDAAiB,eANnB;AAOE,4BAAA,QAAQ,EAAE,KAAKP;AAPjB;AAAA;AAAA;AAAA;AAAA,kCADF,eAWE;AAAK,4BAAA,SAAS,EAAC,oBAAf;AAAA,mDACE;AACE,8BAAA,SAAS,EAAC,iBADZ;AAEE,8BAAA,IAAI,EAAC,QAFP;AAGE,8BAAA,EAAE,EAAC,eAHL;AAIE,8BAAA,OAAO,EAAE,KAAKK,SAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kCAXF;AAAA;AAAA;AAAA;AAAA;AAAA,gCAZF,eAoCE;AAAO,0BAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCApCF,eAqCE;AAAK,0BAAA,SAAS,EAAC,kBAAf;AAAA,kDACE;AACE,4BAAA,IAAI,EAAC,MADP;AAEE,4BAAA,SAAS,EAAC,cAFZ;AAGE,4BAAA,KAAK,EAAE,KAAKC,KAAL,CAAWU,QAHpB;AAIE,4BAAA,IAAI,EAAC,UAJP;AAKE,0CAAW,sBALb;AAME,gDAAiB,eANnB;AAOE,4BAAA,QAAQ,EAAE,KAAKhB;AAPjB;AAAA;AAAA;AAAA;AAAA,kCADF,eAWE;AAAK,4BAAA,SAAS,EAAC,oBAAf;AAAA,mDACE;AACE,8BAAA,SAAS,EAAC,iBADZ;AAEE,8BAAA,IAAI,EAAC,QAFP;AAGE,8BAAA,EAAE,EAAC,eAHL;AAIE,8BAAA,OAAO,EAAE,KAAKe,SAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kCAXF;AAAA;AAAA;AAAA;AAAA;AAAA,gCArCF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BADF,eAkEE;AAAK,oBAAA,SAAS,EAAC,eAAf;AAAA,2CACE;AAAK,sBAAA,SAAS,EAAC,KAAf;AAAA,8CACE;AACE,wBAAA,IAAI,EAAC,QADP;AAEE,wBAAA,SAAS,EAAC,gBAFZ;AAGE,wBAAA,KAAK,EAAC,sBAHR;AAIE,wBAAA,OAAO,EAAE,MACP,KAAKG,oBAAL,CAA0BC,QAA1B;AALJ;AAAA;AAAA;AAAA;AAAA,8BADF,eAUE;AAAK,wBAAA,SAAS,EAAC,yBAAf;AAAA,+CACE;AAAA,kDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAlEF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,eA6FE;AAAK,kBAAA,SAAS,EAAC,KAAf;AAAA,yCACE;AACE,oBAAA,QAAQ,EAAE,KAAKY,mBAAL,CAAyB+C,IAAzB,CAA8B,IAA9B,CADZ;AAEE,oBAAA,SAAS,EAAC,YAFZ;AAAA,4CAIE;AAAA,iDACe,GADf,eAEE;AAAG,wBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,8BAFF,EAE8C,GAF9C;AAAA;AAAA;AAAA;AAAA;AAAA,4BAJF,eAQE;AAAA;AAAA;AAAA;AAAA,4BARF,eAUE;AAAK,sBAAA,SAAS,EAAC,KAAf;AAAA,6CACE;AAAK,wBAAA,SAAS,EAAC,KAAf;AAAA,+CACE;AAAK,0BAAA,SAAS,EAAC,YAAf;AAAA,kDACE;AAAO,4BAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,eAEE;AACE,4BAAA,QAAQ,MADV;AAEE,4BAAA,IAAI,EAAC,MAFP;AAGE,4BAAA,SAAS,EAAC,cAHZ;AAIE,4BAAA,EAAE,EAAC,OAJL;AAKE,4BAAA,IAAI,EAAC,OALP;AAME,4BAAA,QAAQ,EAAE,KAAK9E;AANjB;AAAA;AAAA;AAAA;AAAA,kCAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BAVF,eA0BE;AAAK,sBAAA,SAAS,EAAC,KAAf;AAAA,6CACE;AAAK,wBAAA,SAAS,EAAC,KAAf;AAAA,+CACE;AAAK,0BAAA,SAAS,EAAC,YAAf;AAAA,kDACE;AAAO,4BAAA,OAAO,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,eAEE;AACE,4BAAA,QAAQ,MADV;AAEE,4BAAA,IAAI,EAAC,MAFP;AAGE,4BAAA,SAAS,EAAC,cAHZ;AAIE,4BAAA,EAAE,EAAC,aAJL;AAKE,4BAAA,IAAI,EAAC,aALP;AAME,4BAAA,QAAQ,EAAE,KAAKA;AANjB;AAAA;AAAA;AAAA;AAAA,kCAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BA1BF,eA0CE;AAAK,sBAAA,SAAS,EAAC,KAAf;AAAA,8CACE;AAAK,wBAAA,SAAS,EAAC,KAAf;AAAA,+CACE;AAAK,0BAAA,SAAS,EAAC,YAAf;AAAA,kDACE;AAAO,4BAAA,OAAO,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,eAEE;AACE,4BAAA,QAAQ,MADV;AAEE,4BAAA,IAAI,EAAC,MAFP;AAGE,4BAAA,SAAS,EAAC,cAHZ;AAIE,4BAAA,EAAE,EAAC,SAJL;AAKE,4BAAA,IAAI,EAAC,SALP;AAME,4BAAA,QAAQ,EAAE,KAAKA;AANjB;AAAA;AAAA;AAAA;AAAA,kCAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BADF,eAeE;AAAK,wBAAA,SAAS,EAAC,KAAf;AAAA,+CACE;AAAK,0BAAA,SAAS,EAAC,YAAf;AAAA,kDACE;AAAO,4BAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,eAEE;AACE,4BAAA,QAAQ,MADV;AAEE,4BAAA,IAAI,EAAC,MAFP;AAGE,4BAAA,SAAS,EAAC,cAHZ;AAIE,4BAAA,EAAE,EAAC,MAJL;AAKE,4BAAA,IAAI,EAAC,MALP;AAME,4BAAA,QAAQ,EAAE,KAAKA;AANjB;AAAA;AAAA;AAAA;AAAA,kCAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,8BAfF;AAAA;AAAA;AAAA;AAAA;AAAA,4BA1CF,eAwEE;AAAK,sBAAA,SAAS,EAAC,KAAf;AAAA,6CACE;AAAK,wBAAA,SAAS,EAAC,KAAf;AAAA,+CACE;AAAK,0BAAA,SAAS,EAAC,YAAf;AAAA,iDACE;AACE,4BAAA,IAAI,EAAC,QADP;AAEE,4BAAA,KAAK,EAAC,QAFR;AAGE,4BAAA,SAAS,EAAC;AAHZ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,4BAxEF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBA7FF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBARF;AAAA;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,gBADF;AAyMD;AAnNH;AAAA;AAAA;AAAA;AAAA,YADF;AAuND;;AArZ4C","sourcesContent":["import axios from \"axios\";\nimport React, { Component } from \"react\";\nimport AdminSidePanel from \"./AdminSidePanel\";\nimport toast from \"toasted-notes\";\nimport \"toasted-notes/src/styles.css\";\nimport { Consumer } from \"../../../context\";\nimport { Redirect } from \"react-router-dom\";\nimport { Spring } from \"react-spring/renderprops\";\n\nexport default class Options extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      teamName: \"\",\n      roleName: \"\",\n\n      existingTeamList: [],\n      existingRoleList: [],\n\n      error: \"\",\n\n      // google calender\n      title: \"\",\n      description: \"\",\n      dueDate: \"\",\n      time: \"\",\n    };\n  }\n\n  componentDidMount = async () => {\n    try {\n      const teamList = await axios.get(\"/api/admin/getTeamsAndRoles\");\n      console.log(\"API Response:\", teamList.data); // Log the response\n  \n      this.setState({\n        existingTeamList: teamList.data[0]?.teamNames || [],\n        existingRoleList: teamList.data[0]?.roleNames || [],\n      });\n    } catch (error) {\n      console.error(\"Error fetching team and role data:\", error);\n      this.setState({ error: \"Failed to fetch data.\" });\n    }\n  };\n  \n  onChange = (e) =>\n    this.setState({ [e.target.name]: e.target.value, error: \"\" });\n\n  onAddTeam = async () => {\n    // check if team name already exists\n    const { existingTeamList } = this.state;\n    const { teamName } = this.state;\n\n    if (teamName.trim().length === 0) {\n      this.setState({\n        error: \"Team name cannot be empty\",\n      });\n    } else if (existingTeamList.includes(teamName.trim())) {\n      this.setState({\n        error: \"Team name already exists\",\n      });\n    } else {\n      // save the new team\n      const newTeam = await axios.post(\"/api/admin/addNewTeam\", {\n        teamName: this.state.teamName,\n      });\n\n      this.setState({ existingTeamList: newTeam.data.teamNames });\n\n      toast.notify(\"New team added successfully\", {\n        position: \"top-right\",\n      });\n\n      console.log(\"added new team: \", newTeam.data);\n    }\n  };\n\n  onAddRole = async () => {\n    // check if team name already exists\n    const { existingRoleList } = this.state;\n    const { roleName } = this.state;\n\n    if (roleName.trim().length === 0) {\n      this.setState({\n        error: \"Role name cannot be empty\",\n      });\n    } else if (existingRoleList.includes(roleName.trim())) {\n      this.setState({\n        error: \"Role name already exists\",\n      });\n    } else {\n      // save the new Role\n      const newRole = await axios.post(\"/api/admin/addNewRole\", {\n        roleName: this.state.roleName,\n      });\n\n      toast.notify(\"New role added successfully\", {\n        position: \"top-right\",\n      });\n\n      this.setState({ existingRoleList: newRole.data.roleNames });\n\n      console.log(\"added new role: \", newRole.data);\n    }\n  };\n\n  onDeleteAdminAccount = async (dispatch) => {\n    const adminId = localStorage.getItem(\"userId\");\n\n    try {\n      await axios.delete(`/api/admin/deleteAdminAcc/${adminId}`);\n      console.log(\"deleted admin acc\");\n      localStorage.setItem(\"auth-token\", \"\");\n      localStorage.setItem(\"userId\", \"\");\n\n      dispatch({\n        type: \"LOGGED_OUT\",\n      });\n\n      this.props.history.push(\"/login\");\n    } catch (err) {\n      console.log(err.response.data);\n    }\n  };\n\n  addToGoogleCalender = (e) => {\n    e.preventDefault();\n\n    try {\n      var gapi = window.gapi;\n      console.log(gapi);\n      var CLIENT_ID =\n        \"487679379915-7rvf2ror46e4bbsj8t8obali4heq5qjm.apps.googleusercontent.com\";\n      var API_KEY = \"AIzaSyB_HYziuQ7j6s9CiqSgXV3YiGTzr5nc0xE\";\n      var DISCOVERY_DOCS = [\n        \"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\",\n      ];\n      var SCOPES = \"https://www.googleapis.com/auth/calendar.events\";\n\n      gapi.load(\"client:auth2\", () => {\n        console.log(\"loaded client\");\n\n        gapi.client.init({\n          apiKey: API_KEY,\n          clientId: CLIENT_ID,\n          discoveryDocs: DISCOVERY_DOCS,\n          scope: SCOPES,\n        });\n\n        gapi.client.load(\"calendar\", \"v3\", () =>\n          console.log(\"loaded calender\")\n        );\n\n        gapi.auth2\n          .getAuthInstance()\n          .signIn()\n          .then(() => {\n            var event = {\n              summary: this.state.title,\n              description: this.state.description,\n              start: {\n                dateTime: `${this.state.dueDate}T${this.state.time}:00`,\n                timeZone: \"Asia/Kolkata\",\n              },\n              end: {\n                dateTime: `${this.state.dueDate}T${this.state.time}:00`,\n                timeZone: \"Asia/Kolkata\",\n              },\n              reminders: {\n                useDefault: false,\n                overrides: [\n                  { method: \"email\", minutes: 24 * 60 },\n                  { method: \"popup\", minutes: 10 },\n                ],\n              },\n            };\n\n            var request = gapi.client.calendar.events.insert({\n              calendarId: \"primary\",\n              resource: event,\n            });\n\n            console.log(\"add new event from addTodo\");\n\n            request.execute((event) => {\n              console.log(event);\n            });\n\n            toast.notify(\"Successfully set reminder to your Google Calender\", {\n              position: \"top-right\",\n            });\n          });\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  render() {\n    return (\n      <Consumer>\n        {(value) => {\n          let { dispatch, user } = value;\n\n          const token = localStorage.getItem(\"auth-token\");\n\n          if (!token) return <Redirect to=\"/login\" />;\n          if (user && user.role !== \"admin\")\n            return <Redirect to=\"/empDashBoard\" />;\n\n          return (\n            <Spring\n              from={{ opacity: 0 }}\n              to={{ opacity: 1 }}\n              config={{ duration: 300 }}\n            >\n              {(props) => (\n                <div className=\"row m-0\">\n                  {/* left part */}\n                  <div className=\"col-2 p-0 leftPart\">\n                    <AdminSidePanel />\n                  </div>\n\n                  {/* right part */}\n\n                  <div className=\"col rightPart container\" style={props}>\n                    <div className=\"row\">\n                      {/* add roles, teams */}\n                      <div className=\"col\">\n                        <div className=\"row\">\n                          <div className=\"col\">\n                            <form className=\"addEmpForm\">\n                              {this.state.error ? (\n                                <div className=\"alert alert-danger\">\n                                  {this.state.error}\n                                </div>\n                              ) : null}\n\n                              <h3>Add new Teams and Roles</h3>\n                              <hr />\n                              {/* add new team */}\n\n                              <label htmlFor=\"team\">New Team</label>\n                              <div className=\"input-group mb-3\">\n                                <input\n                                  type=\"text\"\n                                  className=\"form-control\"\n                                  value={this.state.teamName}\n                                  name=\"teamName\"\n                                  aria-label=\"Recipient's username\"\n                                  aria-describedby=\"button-addon2\"\n                                  onChange={this.onChange}\n                                />\n\n                                <div className=\"input-group-append\">\n                                  <button\n                                    className=\"btn btn-primary\"\n                                    type=\"button\"\n                                    id=\"button-addon2\"\n                                    onClick={this.onAddTeam}\n                                  >\n                                    Add\n                                  </button>\n                                </div>\n                              </div>\n\n                              {/* add new role */}\n                              <label htmlFor=\"team\">New Role</label>\n                              <div className=\"input-group mb-3\">\n                                <input\n                                  type=\"text\"\n                                  className=\"form-control\"\n                                  value={this.state.roleName}\n                                  name=\"roleName\"\n                                  aria-label=\"Recipient's username\"\n                                  aria-describedby=\"button-addon2\"\n                                  onChange={this.onChange}\n                                />\n\n                                <div className=\"input-group-append\">\n                                  <button\n                                    className=\"btn btn-primary\"\n                                    type=\"button\"\n                                    id=\"button-addon2\"\n                                    onClick={this.onAddRole}\n                                  >\n                                    Add\n                                  </button>\n                                </div>\n                              </div>\n                            </form>\n                          </div>\n                        </div>\n\n                        <div className=\"row mt-5 ml-3\">\n                          <div className=\"col\">\n                            <input\n                              type=\"button\"\n                              className=\"btn btn-danger\"\n                              value=\"Delete Admin Account\"\n                              onClick={() =>\n                                this.onDeleteAdminAccount(dispatch)\n                              }\n                            />\n\n                            <div className=\"alert alert-danger mt-3\">\n                              <small>\n                                <b>Note: </b> By deleting admin account, you\n                                will loose all your current pending requests,\n                                which might lead to adverse effects. Therefore\n                                it is recommended you delete the account once\n                                clearing all the requests\n                              </small>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* google calender  */}\n                      <div className=\"col\">\n                        <form\n                          onSubmit={this.addToGoogleCalender.bind(this)}\n                          className=\"addEmpForm\"\n                        >\n                          <h3>\n                            Add Reminder{\" \"}\n                            <i className=\"fab fa-google text-dark\"></i>{\" \"}\n                          </h3>\n                          <hr />\n\n                          <div className=\"row\">\n                            <div className=\"col\">\n                              <div className=\"form-group\">\n                                <label htmlFor=\"title\">Title</label>\n                                <input\n                                  required\n                                  type=\"text\"\n                                  className=\"form-control\"\n                                  id=\"title\"\n                                  name=\"title\"\n                                  onChange={this.onChange}\n                                />\n                              </div>\n                            </div>\n                          </div>\n\n                          <div className=\"row\">\n                            <div className=\"col\">\n                              <div className=\"form-group\">\n                                <label htmlFor=\"description\">Description</label>\n                                <textarea\n                                  required\n                                  type=\"text\"\n                                  className=\"form-control\"\n                                  id=\"description\"\n                                  name=\"description\"\n                                  onChange={this.onChange}\n                                />\n                              </div>\n                            </div>\n                          </div>\n\n                          <div className=\"row\">\n                            <div className=\"col\">\n                              <div className=\"form-group\">\n                                <label htmlFor=\"dueDate\">Due Date</label>\n                                <input\n                                  required\n                                  type=\"date\"\n                                  className=\"form-control\"\n                                  id=\"dueDate\"\n                                  name=\"dueDate\"\n                                  onChange={this.onChange}\n                                />\n                              </div>\n                            </div>\n\n                            <div className=\"col\">\n                              <div className=\"form-group\">\n                                <label htmlFor=\"time\">Time</label>\n                                <input\n                                  required\n                                  type=\"time\"\n                                  className=\"form-control\"\n                                  id=\"time\"\n                                  name=\"time\"\n                                  onChange={this.onChange}\n                                />\n                              </div>\n                            </div>\n                          </div>\n\n                          <div className=\"row\">\n                            <div className=\"col\">\n                              <div className=\"form-group\">\n                                <input\n                                  type=\"submit\"\n                                  value=\"Submit\"\n                                  className=\"btn btn-primary btn-block \"\n                                />\n                              </div>\n                            </div>\n                          </div>\n                        </form>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </Spring>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}
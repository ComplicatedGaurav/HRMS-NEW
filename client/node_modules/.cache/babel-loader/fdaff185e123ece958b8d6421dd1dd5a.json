{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\panka\\\\Downloads\\\\Human-Resource-management-master\\\\client\\\\src\\\\components\\\\layouts\\\\Employee\\\\MySalDetails.jsx\";\nimport axios from \"axios\";\nimport React, { Component } from \"react\";\nimport EmpSidePanel from \"./EmpSidePanel\";\nimport \"../../../assets/my-sal-details/mySalDetails.css\";\nimport SalaryStructure from \"./SalaryStructure\";\nimport { Consumer } from \"../../../context\";\nimport { Redirect } from \"react-router-dom\";\nimport { Spring } from \"react-spring/renderprops\";\nexport default class MySalReciept extends Component {\n  constructor() {\n    super();\n\n    this.onMonthClick = month => {\n      this.setState({\n        selectedMonth: month\n      });\n    };\n\n    this.onFindSalReceipt = async () => {\n      const userId = localStorage.getItem(\"userId\");\n      const empSalReceipts = await axios.get(`/api/admin/getSingleEmpSalReceipts/${userId}`);\n      let monthDetails;\n      empSalReceipts.data.monthlyReceipts.forEach(item => {\n        if (item.month === this.state.selectedMonth) {\n          monthDetails = item;\n        }\n      });\n      this.setState({\n        salDetails: monthDetails\n      });\n    };\n\n    this.state = {\n      basicPay: \"\",\n      totalLeaves: \"\",\n      travelAllowance: \"\",\n      medicalAllowance: \"\",\n      bonus: \"\",\n      salary: \"\",\n      // payslip\n      selectedMonth: \"Select Month\",\n      salDetails: undefined\n    };\n    this.curYear = new Date().getFullYear();\n    this.month = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  }\n\n  async componentDidMount() {\n    try {\n      const userId = localStorage.getItem(\"userId\");\n      const userSalData = await axios.get(`/api/admin/getUserSalDetails/${userId}`);\n      console.log((\"sal details\", userSalData.data));\n      this.setState({\n        basicPay: userSalData.data.basicPay,\n        totalLeaves: userSalData.data.totalLeaves,\n        travelAllowance: userSalData.data.travelAllowance,\n        medicalAllowance: userSalData.data.medicalAllowance,\n        bonus: userSalData.data.bonus,\n        salary: userSalData.data.salary\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Consumer, {\n      children: value => {\n        let {\n          user\n        } = value;\n        const token = localStorage.getItem(\"auth-token\");\n        if (!token) return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 30\n        }, this);\n        if (user && user.role === \"admin\") return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 53\n        }, this);\n        const {\n          basicPay,\n          totalLeaves,\n          travelAllowance,\n          medicalAllowance,\n          bonus,\n          salary\n        } = this.state;\n        return /*#__PURE__*/_jsxDEV(Spring // from={{ opacity: 0 }}\n        // to={{ opacity: 1 }}\n        // config={{ duration: 300 }}\n        , {\n          from: {\n            transform: \"translate3d(1000px,0,0) \"\n          },\n          to: {\n            transform: \"translate3d(0px,0,0) \"\n          },\n          config: {\n            friction: 20\n          },\n          children: props => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row m-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-2 p-0 leftPart\",\n              children: /*#__PURE__*/_jsxDEV(EmpSidePanel, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col rightPart container\",\n              style: props,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row \",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col \",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mySalDetails mt-4\",\n                    children: /*#__PURE__*/_jsxDEV(SalaryStructure, {\n                      title: \"Salary Details\",\n                      basicPay: basicPay,\n                      totalLeaves: totalLeaves,\n                      travelAllowance: travelAllowance,\n                      medicalAllowance: medicalAllowance,\n                      bonus: bonus,\n                      salary: salary\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 133,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row my-3\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mySalDetails\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Payroll History\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row my-4\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"dropdown\",\n                          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                            className: \"btn btn-primary dropdown-toggle\",\n                            type: \"button\",\n                            id: \"dropdownMenuButton\",\n                            \"data-toggle\": \"dropdown\",\n                            \"aria-haspopup\": \"true\",\n                            \"aria-expanded\": \"false\",\n                            children: this.state.selectedMonth\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 157,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"dropdown-menu\",\n                            \"aria-labelledby\": \"dropdownMenuButton\",\n                            children: this.month.map(m => {\n                              return /*#__PURE__*/_jsxDEV(\"li\", {\n                                style: {\n                                  cursor: \"pointer\"\n                                },\n                                className: \"dropdown-item btn-primary\",\n                                onClick: () => this.onMonthClick(m),\n                                children: m\n                              }, m, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 173,\n                                columnNumber: 39\n                              }, this);\n                            })\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 167,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 156,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 155,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col\",\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"button\",\n                          className: \"btn btn-primary btn-sm\",\n                          value: \"Search\",\n                          onClick: this.onFindSalReceipt\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 189,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 188,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col\",\n                        children: this.state.salDetails ? /*#__PURE__*/_jsxDEV(SalaryStructure, {\n                          title: `${this.state.salDetails.month}, ${this.state.salDetails.year}`,\n                          basicPay: this.state.salDetails.salDetails.basicPay,\n                          totalLeaves: this.state.salDetails.salDetails.totalLeaves,\n                          travelAllowance: this.state.salDetails.salDetails.travelAllowance,\n                          medicalAllowance: this.state.salDetails.salDetails.medicalAllowance,\n                          bonus: this.state.salDetails.salDetails.bonus,\n                          salary: this.state.salDetails.salDetails.salary\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 201,\n                          columnNumber: 33\n                        }, this) : /*#__PURE__*/_jsxDEV(\"h6\", {\n                          className: \"mt-3\",\n                          children: \"No data available to display\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 223,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 199,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/panka/Downloads/Human-Resource-management-master/client/src/components/layouts/Employee/MySalDetails.jsx"],"names":["axios","React","Component","EmpSidePanel","SalaryStructure","Consumer","Redirect","Spring","MySalReciept","constructor","onMonthClick","month","setState","selectedMonth","onFindSalReceipt","userId","localStorage","getItem","empSalReceipts","get","monthDetails","data","monthlyReceipts","forEach","item","state","salDetails","basicPay","totalLeaves","travelAllowance","medicalAllowance","bonus","salary","undefined","curYear","Date","getFullYear","componentDidMount","userSalData","console","log","e","render","value","user","token","role","transform","friction","props","map","m","cursor","year"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { Component } from \"react\";\nimport EmpSidePanel from \"./EmpSidePanel\";\nimport \"../../../assets/my-sal-details/mySalDetails.css\";\nimport SalaryStructure from \"./SalaryStructure\";\nimport { Consumer } from \"../../../context\";\nimport { Redirect } from \"react-router-dom\";\nimport { Spring } from \"react-spring/renderprops\";\n\nexport default class MySalReciept extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      basicPay: \"\",\n      totalLeaves: \"\",\n      travelAllowance: \"\",\n      medicalAllowance: \"\",\n      bonus: \"\",\n      salary: \"\",\n\n      // payslip\n      selectedMonth: \"Select Month\",\n      salDetails: undefined,\n    };\n\n    this.curYear = new Date().getFullYear();\n\n    this.month = [\n      \"January\",\n      \"February\",\n      \"March\",\n      \"April\",\n      \"May\",\n      \"June\",\n      \"July\",\n      \"August\",\n      \"September\",\n      \"October\",\n      \"November\",\n      \"December\",\n    ];\n  }\n\n  async componentDidMount() {\n    try {\n      const userId = localStorage.getItem(\"userId\");\n      const userSalData = await axios.get(\n        `/api/admin/getUserSalDetails/${userId}`\n      );\n\n      console.log((\"sal details\", userSalData.data));\n\n      this.setState({\n        basicPay: userSalData.data.basicPay,\n        totalLeaves: userSalData.data.totalLeaves,\n        travelAllowance: userSalData.data.travelAllowance,\n        medicalAllowance: userSalData.data.medicalAllowance,\n        bonus: userSalData.data.bonus,\n        salary: userSalData.data.salary,\n      });\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  onMonthClick = (month) => {\n    this.setState({\n      selectedMonth: month,\n    });\n  };\n\n  onFindSalReceipt = async () => {\n    const userId = localStorage.getItem(\"userId\");\n    const empSalReceipts = await axios.get(\n      `/api/admin/getSingleEmpSalReceipts/${userId}`\n    );\n\n    let monthDetails;\n    empSalReceipts.data.monthlyReceipts.forEach((item) => {\n      if (item.month === this.state.selectedMonth) {\n        monthDetails = item;\n      }\n    });\n    this.setState({ salDetails: monthDetails });\n  };\n\n  render() {\n    return (\n      <Consumer>\n        {(value) => {\n          let { user } = value;\n          const token = localStorage.getItem(\"auth-token\");\n          if (!token) return <Redirect to=\"/login\" />;\n\n          if (user && user.role === \"admin\") return <Redirect to=\"/\" />;\n\n          const {\n            basicPay,\n            totalLeaves,\n            travelAllowance,\n            medicalAllowance,\n            bonus,\n            salary,\n          } = this.state;\n\n          return (\n            <Spring\n              // from={{ opacity: 0 }}\n              // to={{ opacity: 1 }}\n              // config={{ duration: 300 }}\n              from={{\n                transform: \"translate3d(1000px,0,0) \",\n              }}\n              to={{\n                transform: \"translate3d(0px,0,0) \",\n              }}\n              config={{ friction: 20 }}\n            >\n              {(props) => (\n                <div className=\"row m-0\">\n                  {/* left part */}\n                  <div className=\"col-2 p-0 leftPart\">\n                    <EmpSidePanel />\n                  </div>\n\n                  {/* right part */}\n                  <div className=\"col rightPart container\" style={props}>\n                    <div className=\"row \">\n                      <div className=\"col \">\n                        {/* current salary details */}\n                        <div className=\"mySalDetails mt-4\">\n                          <SalaryStructure\n                            title=\"Salary Details\"\n                            basicPay={basicPay}\n                            totalLeaves={totalLeaves}\n                            travelAllowance={travelAllowance}\n                            medicalAllowance={medicalAllowance}\n                            bonus={bonus}\n                            salary={salary}\n                          />\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* salary slip part */}\n                    <div className=\"row my-3\">\n                      <div className=\"col\">\n                        <div className=\"mySalDetails\">\n                          <h1>Payroll History</h1>\n                          <hr />\n                          {/* select month */}\n                          <div className=\"row my-4\">\n                            {/* dropdown col */}\n                            <div className=\"col\">\n                              <div className=\"dropdown\">\n                                <button\n                                  className=\"btn btn-primary dropdown-toggle\"\n                                  type=\"button\"\n                                  id=\"dropdownMenuButton\"\n                                  data-toggle=\"dropdown\"\n                                  aria-haspopup=\"true\"\n                                  aria-expanded=\"false\"\n                                >\n                                  {this.state.selectedMonth}\n                                </button>\n                                <div\n                                  className=\"dropdown-menu\"\n                                  aria-labelledby=\"dropdownMenuButton\"\n                                >\n                                  {this.month.map((m) => {\n                                    return (\n                                      <li\n                                        style={{ cursor: \"pointer\" }}\n                                        key={m}\n                                        className=\"dropdown-item btn-primary\"\n                                        onClick={() => this.onMonthClick(m)}\n                                      >\n                                        {m}\n                                      </li>\n                                    );\n                                  })}\n                                </div>\n                              </div>\n                            </div>\n\n                            {/* search button */}\n                            <div className=\"col\">\n                              <input\n                                type=\"button\"\n                                className=\"btn btn-primary btn-sm\"\n                                value=\"Search\"\n                                onClick={this.onFindSalReceipt}\n                              />\n                            </div>\n                          </div>\n                          {/* card */}\n                          <div className=\"row\">\n                            <div className=\"col\">\n                              {this.state.salDetails ? (\n                                <SalaryStructure\n                                  title={`${this.state.salDetails.month}, ${this.state.salDetails.year}`}\n                                  basicPay={\n                                    this.state.salDetails.salDetails.basicPay\n                                  }\n                                  totalLeaves={\n                                    this.state.salDetails.salDetails.totalLeaves\n                                  }\n                                  travelAllowance={\n                                    this.state.salDetails.salDetails\n                                      .travelAllowance\n                                  }\n                                  medicalAllowance={\n                                    this.state.salDetails.salDetails\n                                      .medicalAllowance\n                                  }\n                                  bonus={this.state.salDetails.salDetails.bonus}\n                                  salary={\n                                    this.state.salDetails.salDetails.salary\n                                  }\n                                />\n                              ) : (\n                                <h6 className=\"mt-3\">\n                                  No data available to display\n                                </h6>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </Spring>\n          );\n        }}\n      </Consumer>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}